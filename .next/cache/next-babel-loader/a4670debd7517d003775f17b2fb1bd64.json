{"ast":null,"code":"import { GoogleSpreadsheet } from 'google-spreadsheet';\nconst doc = new GoogleSpreadsheet(process.env.SHEET_DOC_ID);\nexport default (async (req, res) => {\n  try {\n    await doc.useServiceAccountAuth({\n      client_email: process.env.SHEET_CLIENT_EMAIL,\n      private_key: process.env.PRIVATE_KEY\n    });\n    await doc.loadInfo();\n    const sheet = doc.sheetsByIndex[2];\n    await sheet.loadCells('A3:B3');\n    const promotionCell = sheet.getCell(2, 0);\n    const textCell = sheet.getCell(2, 1);\n    console.log(promotionCell.value === 'VERDADEIRO');\n    res.end(JSON.stringify({\n      showCoupon: promotionCell.value === 'VERDADEIRO',\n      message: textCell.value\n    }));\n  } catch (err) {\n    res.end(JSON.stringify({\n      showCoupon: false,\n      message: ''\n    }));\n  }\n});","map":{"version":3,"sources":["C:/Users/Erika/Desktop/devPleno/palpite-box/pages/api/get-promo.js"],"names":["GoogleSpreadsheet","doc","process","env","SHEET_DOC_ID","req","res","useServiceAccountAuth","client_email","SHEET_CLIENT_EMAIL","private_key","PRIVATE_KEY","loadInfo","sheet","sheetsByIndex","loadCells","promotionCell","getCell","textCell","console","log","value","end","JSON","stringify","showCoupon","message","err"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,oBAAlC;AAEA,MAAMC,GAAG,GAAG,IAAID,iBAAJ,CAAsBE,OAAO,CAACC,GAAR,CAAYC,YAAlC,CAAZ;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAE/B,MAAI;AACA,UAAML,GAAG,CAACM,qBAAJ,CAA0B;AAC5BC,MAAAA,YAAY,EAAEN,OAAO,CAACC,GAAR,CAAYM,kBADE;AAE5BC,MAAAA,WAAW,EAAER,OAAO,CAACC,GAAR,CAAYQ;AAFG,KAA1B,CAAN;AAKA,UAAMV,GAAG,CAACW,QAAJ,EAAN;AACA,UAAMC,KAAK,GAAGZ,GAAG,CAACa,aAAJ,CAAkB,CAAlB,CAAd;AAEA,UAAMD,KAAK,CAACE,SAAN,CAAgB,OAAhB,CAAN;AAEA,UAAMC,aAAa,GAAGH,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAAtB;AAEA,UAAMC,QAAQ,GAAGL,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAAjB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYJ,aAAa,CAACK,KAAd,KAAwB,YAApC;AAEAf,IAAAA,GAAG,CAACgB,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,UAAU,EAAET,aAAa,CAACK,KAAd,KAAwB,YADjB;AAEnBK,MAAAA,OAAO,EAAER,QAAQ,CAACG;AAFC,KAAf,CAAR;AAKH,GArBD,CAqBE,OAAOM,GAAP,EAAY;AACVrB,IAAAA,GAAG,CAACgB,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,UAAU,EAAE,KADO;AAEnBC,MAAAA,OAAO,EAAE;AAFU,KAAf,CAAR;AAIH;AACJ,CA7BD","sourcesContent":["import { GoogleSpreadsheet } from 'google-spreadsheet'\r\n\r\nconst doc = new GoogleSpreadsheet(process.env.SHEET_DOC_ID)\r\n\r\nexport default async (req, res) => {\r\n\r\n    try {\r\n        await doc.useServiceAccountAuth({\r\n            client_email: process.env.SHEET_CLIENT_EMAIL,\r\n            private_key: process.env.PRIVATE_KEY\r\n        })\r\n\r\n        await doc.loadInfo()\r\n        const sheet = doc.sheetsByIndex[2]\r\n\r\n        await sheet.loadCells('A3:B3')\r\n\r\n        const promotionCell = sheet.getCell(2, 0)\r\n\r\n        const textCell = sheet.getCell(2, 1)\r\n        console.log(promotionCell.value === 'VERDADEIRO')\r\n\r\n        res.end(JSON.stringify({\r\n            showCoupon: promotionCell.value === 'VERDADEIRO',\r\n            message: textCell.value\r\n        }))\r\n\r\n    } catch (err) {\r\n        res.end(JSON.stringify({\r\n            showCoupon: false,\r\n            message: ''\r\n        }))\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}